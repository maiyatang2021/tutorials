# 如何查看 Linux 磁盤空間佔用

## 查看磁盤分區的空間佔用

要使用 Linux 的分區，需要將它掛載到某一個目錄下面，因此可以不嚴謹地理解爲一個分區一定對應一個目錄，該目錄下的內容都是該分區的內容。

要查看分區的空間佔用，可以使用`df`命令。

```sh
df -h
```

返回內容類似如下：

```
文件系統          容量   已用   可用 已用% 掛載點
devtmpfs        3.9G     0  3.9G    0% /dev
tmpfs           3.9G     0  3.9G    0% /dev/shm
/dev/sda2       496G  2.6G  484G    1% /
/dev/sda1       969M  112M  792M   13% /boot
```

可以看到，主要的分區是`/dev/sda1`和`/dev/sda2`，其中`/dev/sda2`的空間很大，是主要用於存放數據的分區，掛載點是`/`，即根目錄。從上述返回中，可以看到每個磁盤分區的空間佔用情況。

## 查看目錄的空間佔用

查看目錄的空間佔用，可以使用`du`命令。`du`命令默認會列出指定目錄中所有層級的目錄和文件佔用的空間，可以通過參數`--max-depth`指定只列出指定層級的目錄和文件佔用的空間。

```sh
du -h --max-depth=1
```

返回內容類似如下：

```
68K     ./nginx
12K     ./scripts
44M     ./log
20K     ./bakup
1.9M    ./letsencrypt
20M     ./storage
22M     ./tmp
88M     .
```

從上面的返回中即可看到各個目錄佔用的總空間大小。

值得注意的是，`du`命令執行起來稍慢，因爲它需要遍歷指定目錄的所有文件和目錄，所以需要耐心等待，如果目錄和文件較多，需要比較久的時間。

在確保可讀性不受影響的情況下，也可以爲`--max-depth`參數指定得更大一些，例如：

```sh
du -h --max-depth=2
```

這樣就可以一次性看到更多的信息，更快速地瞭解是哪些目錄佔用了大量空間。

## 小結

以上就是 Linux 系統中查看磁盤空間佔用的方法，兩者結合即可完成日常的查看磁盤空間佔用的任務。
