# 使用 ffmpeg 轉換音視頻格式

ffmpeg 是一個開源的音視頻處理工具，被廣泛應用於各種音視頻處理場合，如各種視頻網站、視頻播放工具、格式轉換工具等。我們可以使用它很方便地將音頻和視頻文件轉換爲各種格式，比如 mp4、flv、avi、mov 等。

## 安裝 ffmpeg

在 [ffmpeg官網](https://ffmpeg.org/download.html) 可以直接下載安裝。

MacOS 上還可以使用 brew 安裝 ffmpeg：

```sh
brew install ffmpeg
```

## 使用 ffmpeg 轉換格式和壓縮視頻

```
ffmpeg -y -i input.mp4 -s 640x360 -r 20 -ac 1 -ar 24000 compress.mp4
```

這段命令的含義是將`input.mp4`壓縮爲`compress.mp4`，其中的參數含義如下：

- `-i` 輸入文件，即需要轉換格式/壓縮的視頻文件
- `-y` 如果輸出文件存在的話，覆蓋輸出文件
- `-s` size，分辨率，此處設置爲 640x360
- `-r` 幀率，此處設置爲20幀/s
- `-ac` 聲道數，此處設置爲單聲道輸出，即合併左右聲道的聲音
- `-ar` sample rate 聲音採樣率，此處設置爲24000Hz，即24KHz

從上述參數可知，輸出的視頻文件將是 640x360 分辨率，24KHz 採樣率，單聲道，20幀/s 的視頻文件，相對來說是一個比較小的視頻文件。如果上述參數不能滿足你的需求，可以看情況適當調整。

其它可用參數：

- `-f` format，可指定輸出格式，例子中默認爲`mp4`，即 h264 + aac
- `-af` 聲音濾鏡，可以通過它來修改視頻的音量`-af 'volume=1'`
- `-an` 在輸出的視頻中去掉聲音數據（靜音）
