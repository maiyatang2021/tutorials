# 使用 ffmpeg 转换音视频格式

ffmpeg 是一个开源的音视频处理工具，被广泛应用于各种音视频处理场合，如各种视频网站、视频播放工具、格式转换工具等。我们可以使用它很方便地将音频和视频文件转换为各种格式，比如 mp4、flv、avi、mov 等。

## 安装 ffmpeg

在 [ffmpeg官网](https://ffmpeg.org/download.html) 可以直接下载安装。

MacOS 上还可以使用 brew 安装 ffmpeg：

```sh
brew install ffmpeg
```

## 使用 ffmpeg 转换格式和压缩视频

```
ffmpeg -y -i input.mp4 -s 640x360 -r 20 -ac 1 -ar 24000 compress.mp4
```

这段命令的含义是将`input.mp4`压缩为`compress.mp4`，其中的参数含义如下：

- `-i` 输入文件，即需要转换格式/压缩的视频文件
- `-y` 如果输出文件存在的话，覆盖输出文件
- `-s` size，分辨率，此处设置为 640x360
- `-r` 帧率，此处设置为20帧/s
- `-ac` 声道数，此处设置为单声道输出，即合并左右声道的声音
- `-ar` sample rate 声音采样率，此处设置为24000Hz，即24KHz

从上述参数可知，输出的视频文件将是 640x360 分辨率，24KHz 采样率，单声道，20帧/s 的视频文件，相对来说是一个比较小的视频文件。如果上述参数不能满足你的需求，可以看情况适当调整。

其它可用参数：

- `-f` format，可指定输出格式，例子中默认为`mp4`，即 h264 + aac
- `-af` 声音滤镜，可以通过它来修改视频的音量`-af 'volume=1'`
- `-an` 在输出的视频中去掉声音数据（静音）
