# 如何查看磁盘空间占用

## 查看磁盘分区的空间占用

要使用 Linux 的分区，需要将它挂载到某一个目录下面，因此可以不严谨地理解为一个分区一定对应一个目录，该目录下的内容都是该分区的内容。

要查看分区的空间占用，可以使用`df`命令。

```sh
df -h
```

返回内容类似如下：

```
文件系统          容量   已用   可用 已用% 挂载点
devtmpfs        3.9G     0  3.9G    0% /dev
tmpfs           3.9G     0  3.9G    0% /dev/shm
/dev/sda2       496G  2.6G  484G    1% /
/dev/sda1       969M  112M  792M   13% /boot
```

可以看到，主要的分区是`/dev/sda1`和`/dev/sda2`，其中`/dev/sda2`的空间很大，是主要用于存放数据的分区，挂载点是`/`，即根目录。从上述返回中，可以看到每个磁盘分区的空间占用情况。

## 查看目录的空间占用

查看目录的空间占用，可以使用`du`命令。`du`命令默认会列出指定目录中所有层级的目录和文件占用的空间，可以通过参数`--max-depth`指定只列出指定层级的目录和文件占用的空间。

```sh
du -h --max-depth=1
```

返回内容类似如下：

```
68K     ./nginx
12K     ./scripts
44M     ./log
20K     ./bakup
1.9M    ./letsencrypt
20M     ./storage
22M     ./tmp
88M     .
```

从上面的返回中即可看到各个目录占用的总空间大小。

值得注意的是，`du`命令执行起来稍慢，因为它需要遍历指定目录的所有文件和目录，所以需要耐心等待，如果目录和文件较多，需要比较久的时间。

在确保可读性不受影响的情况下，也可以为`--max-depth`参数指定得更大一些，例如：

```sh
du -h --max-depth=2
```

这样就可以一次性看到更多的信息，更快速地了解是哪些目录占用了大量空间。

## 小结

以上就是 Linux 系统中查看磁盘空间占用的方法，两者结合即可完成日常的查看磁盘空间占用的任务。
