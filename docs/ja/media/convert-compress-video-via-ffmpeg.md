# ffmpegを使ってオーディオとビデオのフォーマットを変換する

ffmpegは、さまざまなビデオウェブサイト、ビデオ再生ツール、フォーマット変換ツールなど、さまざまなオーディオおよびビデオ処理シチュエーションで広く使用されているオープンソースのオーディオおよびビデオ処理ツールです。これを使用して、オーディオおよびビデオファイルをmp4、flv、avi、movなどのさまざまな形式に簡単に変換できます。

## ffmpegのインストール

[ffmpeg公式ウェブサイト](https://ffmpeg.org/download.html)から直接ダウンロードしてインストールできます。

MacOSでは、brewを使用してffmpegをインストールすることもできます。

```sh
brew install ffmpeg
```

## ffmpegを使用してフォーマットを変換し、ビデオを圧縮する

```
ffmpeg -y -i input.mp4 -s 640x360 -r 20 -ac 1 -ar 24000 compress.mp4
```

このコマンドの意味は、`input.mp4`を`compress.mp4`に圧縮することであり、パラメータは以下の意味を持ちます。

- `-i` 入力ファイル、つまり変換/圧縮するビデオファイル
- `-y` 出力ファイルが存在する場合は上書きする
- `-s` サイズ、解像度、ここでは640x360に設定
- `-r` フレームレート、ここでは20fpsに設定
- `-ac` チャンネル数、ここではモノラル出力に設定、つまり音声の左右チャンネルを結合する
- `-ar` サンプルレート、ここでは24000Hzに設定、つまり24KHz

上記のパラメータから、出力ビデオファイルは、解像度640x360、サンプルレート24KHz、モノラル、20フレーム/秒で、比較的小さなビデオファイルになります。上記のパラメータが要件を満たさない場合は、適宜調整できます。

その他の利用可能なパラメータ。

- `-f` フォーマット、出力フォーマットを指定できます。デフォルトは`mp4`、つまりh264 + aacです。
- `-af` サウンドフィルタ、ビデオの音量を変更するために使用できる`-af 'volume=1'`
- `-an` 出力ビデオからサウンドデータ（ミュート）を削除する